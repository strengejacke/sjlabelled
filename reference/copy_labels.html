<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Copy value and variable labels to (subsetted) data frames — copy_labels • sjlabelled</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Copy value and variable labels to (subsetted) data frames — copy_labels" />
<meta property="og:description" content="Subsetting-functions usually drop value and variable labels from
               subsetted data frames (if the original data frame has value and variable
               label attributes). This function copies these value and variable
               labels back to subsetted data frames that have been subsetted, for instance,
               with subset." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sjlabelled</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/intro_sjlabelled.html">Labelled Data and the sjlabelled-Package</a>
    </li>
    <li>
      <a href="../articles/labelleddata.html">Working with Labelled Data</a>
    </li>
    <li>
      <a href="../articles/quasiquotation.html">Using quasiquotation to add variable and value labels</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/strengejacke/sjlabelled/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Copy value and variable labels to (subsetted) data frames</h1>
    <small class="dont-index">Source: <a href='https://github.com/strengejacke/sjlabelled/blob/master/R/copy_labels.R'><code>R/copy_labels.R</code></a></small>
    <div class="hidden name"><code>copy_labels.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Subsetting-functions usually drop value and variable labels from
               subsetted data frames (if the original data frame has value and variable
               label attributes). This function copies these value and variable
               labels back to subsetted data frames that have been subsetted, for instance,
               with <code><a href='https://rdrr.io/r/base/subset.html'>subset</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>copy_labels</span>(<span class='kw'>df_new</span>, df_origin = <span class='kw'>NULL</span>, <span class='kw'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df_new</th>
      <td><p>The new, subsetted data frame.</p></td>
    </tr>
    <tr>
      <th>df_origin</th>
      <td><p>The original data frame where the subset (<code>df_new</code>) stems from;
use <code>NULL</code>, if value and variable labels from <code>df_new</code> should be removed.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Optional, unquoted names of variables that should be selected for
further processing. Required, if <code>x</code> is a data frame (and no
vector) and only selected variables from <code>x</code> should be processed.
You may also use functions like <code><a href='https://rdrr.io/r/base/Colon.html'>:</a></code> or tidyselect's select-helpers.
See 'Examples'.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns <code>df_new</code> with either removed value and variable label attributes
          (if <code>df_origin = NULL</code>) or with copied value and variable label
          attributes (if <code>df_origin</code> was the original subsetted data frame).</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>In case <code>df_origin = NULL</code>, all possible label attributes
        from <code>df_new</code> are removed.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='kw'>efc</span>)

<span class='co'># create subset - drops label attributes</span>
<span class='kw'>efc.sub</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span>(<span class='kw'>efc</span>, subset = <span class='kw'>e16sex</span> <span class='op'>==</span> <span class='fl'>1</span>, select = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>4</span><span class='op'>:</span><span class='fl'>8</span>))
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='kw'>efc.sub</span>)</div><div class='output co'>#&gt; 'data.frame':	296 obs. of  5 variables:
#&gt;  $ e17age : num  74 68 80 72 94 79 67 80 76 88 ...
#&gt;  $ e42dep : num  4 4 1 3 3 4 3 4 2 4 ...
#&gt;  $ c82cop1: num  4 3 3 4 3 3 4 2 2 3 ...
#&gt;  $ c83cop2: num  2 4 2 2 2 2 1 3 2 2 ...
#&gt;  $ c84cop3: num  4 4 1 1 1 4 2 4 2 4 ...</div><div class='input'>
<span class='co'># copy back attributes from original dataframe</span>
<span class='kw'>efc.sub</span> <span class='op'>&lt;-</span> <span class='fu'>copy_labels</span>(<span class='kw'>efc.sub</span>, <span class='kw'>efc</span>)
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='kw'>efc.sub</span>)</div><div class='output co'>#&gt; 'data.frame':	296 obs. of  5 variables:
#&gt;  $ e17age : num  74 68 80 72 94 79 67 80 76 88 ...
#&gt;   ..- attr(*, "label")= chr "elder' age"
#&gt;  $ e42dep : num  4 4 1 3 3 4 3 4 2 4 ...
#&gt;   ..- attr(*, "label")= chr "elder's dependency"
#&gt;   ..- attr(*, "labels")= Named num [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "independent" "slightly dependent" "moderately dependent" "severely dependent"
#&gt;  $ c82cop1: num  4 3 3 4 3 3 4 2 2 3 ...
#&gt;   ..- attr(*, "label")= chr "do you feel you cope well as caregiver?"
#&gt;   ..- attr(*, "labels")= Named num [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "never" "sometimes" "often" "always"
#&gt;  $ c83cop2: num  2 4 2 2 2 2 1 3 2 2 ...
#&gt;   ..- attr(*, "label")= chr "do you find caregiving too demanding?"
#&gt;   ..- attr(*, "labels")= Named num [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "Never" "Sometimes" "Often" "Always"
#&gt;  $ c84cop3: num  4 4 1 1 1 4 2 4 2 4 ...
#&gt;   ..- attr(*, "label")= chr "does caregiving cause difficulties in your relationship with your friends?"
#&gt;   ..- attr(*, "labels")= Named num [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "Never" "Sometimes" "Often" "Always"</div><div class='input'>
<span class='co'># remove all labels</span>
<span class='kw'>efc.sub</span> <span class='op'>&lt;-</span> <span class='fu'>copy_labels</span>(<span class='kw'>efc.sub</span>)</div><div class='output co'>#&gt; <span class='message'>Removing all variable and value labels from data frame.</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='kw'>efc.sub</span>)</div><div class='output co'>#&gt; 'data.frame':	296 obs. of  5 variables:
#&gt;  $ e17age : num  74 68 80 72 94 79 67 80 76 88 ...
#&gt;  $ e42dep : num  4 4 1 3 3 4 3 4 2 4 ...
#&gt;  $ c82cop1: num  4 3 3 4 3 3 4 2 2 3 ...
#&gt;  $ c83cop2: num  2 4 2 2 2 2 1 3 2 2 ...
#&gt;  $ c84cop3: num  4 4 1 1 1 4 2 4 2 4 ...</div><div class='input'>
<span class='co'># create subset - drops label attributes</span>
<span class='kw'>efc.sub</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span>(<span class='kw'>efc</span>, subset = <span class='kw'>e16sex</span> <span class='op'>==</span> <span class='fl'>1</span>, select = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>4</span><span class='op'>:</span><span class='fl'>8</span>))
<span class='co'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='st'><a href='https://dplyr.tidyverse.org'>"dplyr"</a></span>)) {
  <span class='co'># create subset with dplyr's select - attributes are preserved</span>
  <span class='kw'>efc.sub2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span>(<span class='kw'>efc</span>, <span class='kw'>c160age</span>, <span class='kw'>e42dep</span>, <span class='kw'>neg_c_7</span>, <span class='kw'>c82cop1</span>, <span class='kw'>c84cop3</span>)
  <span class='co'># copy labels from those columns that are available</span>
  <span class='fu'>copy_labels</span>(<span class='kw'>efc.sub</span>, <span class='kw'>efc.sub2</span>) <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>()
}</div><div class='output co'>#&gt; 'data.frame':	296 obs. of  5 variables:
#&gt;  $ e17age : num  74 68 80 72 94 79 67 80 76 88 ...
#&gt;  $ e42dep : num  4 4 1 3 3 4 3 4 2 4 ...
#&gt;   ..- attr(*, "label")= chr "elder's dependency"
#&gt;   ..- attr(*, "labels")= Named num [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "independent" "slightly dependent" "moderately dependent" "severely dependent"
#&gt;  $ c82cop1: num  4 3 3 4 3 3 4 2 2 3 ...
#&gt;   ..- attr(*, "label")= chr "do you feel you cope well as caregiver?"
#&gt;   ..- attr(*, "labels")= Named num [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "never" "sometimes" "often" "always"
#&gt;  $ c83cop2: num  2 4 2 2 2 2 1 3 2 2 ...
#&gt;  $ c84cop3: num  4 4 1 1 1 4 2 4 2 4 ...
#&gt;   ..- attr(*, "label")= chr "does caregiving cause difficulties in your relationship with your friends?"
#&gt;   ..- attr(*, "labels")= Named num [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "Never" "Sometimes" "Often" "Always"</div><div class='input'>
<span class='co'># copy labels from only some columns</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='fu'>copy_labels</span>(<span class='kw'>efc.sub</span>, <span class='kw'>efc</span>, <span class='kw'>e42dep</span>))</div><div class='output co'>#&gt; 'data.frame':	296 obs. of  5 variables:
#&gt;  $ e17age : num  74 68 80 72 94 79 67 80 76 88 ...
#&gt;  $ e42dep : num  4 4 1 3 3 4 3 4 2 4 ...
#&gt;   ..- attr(*, "label")= chr "elder's dependency"
#&gt;   ..- attr(*, "labels")= Named num [1:4] 1 2 3 4
#&gt;   .. ..- attr(*, "names")= chr [1:4] "independent" "slightly dependent" "moderately dependent" "severely dependent"
#&gt;  $ c82cop1: num  4 3 3 4 3 3 4 2 2 3 ...
#&gt;  $ c83cop2: num  2 4 2 2 2 2 1 3 2 2 ...
#&gt;  $ c84cop3: num  4 4 1 1 1 4 2 4 2 4 ...</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='fu'>copy_labels</span>(<span class='kw'>efc.sub</span>, <span class='kw'>efc</span>, <span class='op'>-</span><span class='kw'>e17age</span>))</div><div class='output co'>#&gt; <span style='color: #BB0000;'>1 variables were not found in the dataset: -e17age
#&gt; </span><span>'data.frame':	296 obs. of  5 variables:
#&gt;  $ e17age : num  74 68 80 72 94 79 67 80 76 88 ...
#&gt;  $ e42dep : num  4 4 1 3 3 4 3 4 2 4 ...
#&gt;  $ c82cop1: num  4 3 3 4 3 3 4 2 2 3 ...
#&gt;  $ c83cop2: num  2 4 2 2 2 2 1 3 2 2 ...
#&gt;  $ c84cop3: num  4 4 1 1 1 4 2 4 2 4 ...</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/strengejacke'>Daniel Lüdecke</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


